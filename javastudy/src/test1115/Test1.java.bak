package test1115;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Scanner;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

/*
1. 반복문을 이용하여 
  파일명을 입력받아서 해당 파일이 존재하면 해당파일명.bak 파일 복사하기
  파일명에 exit 가 입력되면, 프로그램 종료.
  해당 파일이 없으면, 복사할 파일이 없습니다. 메세지 출력

[결과]
파일명을 입력하세요(종료:exit)
aaa.txt
aaa.txt=>aaa.bak 복사완료
파일명을 입력하세요(종료:exit)
bbb.txt  
복사할 파일이 없습니다.
파일명을 입력하세요(종료:exit)
exit
*/
public class Test1 {
	public static void main(String[] args) throws IOException {
        Scanner scan = new Scanner(System.in);
        while (true) {
            System.out.println("파일명을 입력하세요(종료:exit)");
            String input = scan.next();
            if (input.equalsIgnoreCase("exit")) {
                System.out.println("종료");
                break;
            }
            String filepath = "src/test1115/" + input;
            File f = new File(filepath);

            if (f.exists()) {
                FileInputStream fis = new FileInputStream(f);
                FileOutputStream fos = new FileOutputStream(filepath + ".bak");

                byte[] buf = new byte[8096];
                int len;
                while ((len = fis.read(buf)) != -1) {
                    fos.write(buf, 0, len);
                }
                String filePattern = "(\\w).(\\w)";
                Pattern p = Pattern.compile(filePattern);
        		Matcher m = p.matcher(input);
                
                fis.close();
                fos.close();

                System.out.printf("%s => %s %s\n", input,  m.group(1) + ".bak", "복사완료");
            } else {
                System.out.println("복사할 파일이 없습니다.");
            }
        }
    }
}
